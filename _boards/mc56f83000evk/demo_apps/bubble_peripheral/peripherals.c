/*
 * Copyright 2023 NXP
 * All rights reserved.
 *
 * SPDX-License-Identifier: BSD-3-Clause
 */

/***********************************************************************************************************************
 * This file was generated by the MCUXpresso Config Tools. Any manual edits made to this file
 * will be overwritten if the respective MCUXpresso Config Tools is used to update this file.
 **********************************************************************************************************************/

/* clang-format off */
/* TEXT BELOW IS USED AS SETTING FOR TOOLS *************************************
!!GlobalInfo
product: Peripherals v12.0
processor: MC56F83789
package_id: MC56F83789VLL
mcu_data: ksdk2_0
processor_version: 0.13.4
board: MC56F83000-EVK
functionalGroups:
- name: BOARD_InitPeripherals
  UUID: f9f6f4e8-de8e-445b-8e0d-71ccdf9e53ad
  called_from_default_init: true
  selectedCore: core0
 * BE CAREFUL MODIFYING THIS COMMENT - IT IS YAML SETTINGS FOR TOOLS **********/

/* TEXT BELOW IS USED AS SETTING FOR TOOLS *************************************
component:
- type: 'system'
- type_id: 'system_54b53072540eeeb8f8e9343e71f28176'
- global_system_definitions:
  - user_definitions: ''
  - user_includes: ''
  - init_delay_enable: 'false'
 * BE CAREFUL MODIFYING THIS COMMENT - IT IS YAML SETTINGS FOR TOOLS **********/

/* TEXT BELOW IS USED AS SETTING FOR TOOLS *************************************
component:
- type: 'uart_cmsis_common'
- type_id: 'uart_cmsis_common_9cb8e302497aa696fdbb5a4fd622c2a8'
- global_USART_CMSIS_common:
  - quick_selection: 'default'
 * BE CAREFUL MODIFYING THIS COMMENT - IT IS YAML SETTINGS FOR TOOLS **********/

/* TEXT BELOW IS USED AS SETTING FOR TOOLS *************************************
component:
- type: 'gpio_adapter_common'
- type_id: 'gpio_adapter_common_57579b9ac814fe26bf95df0a384c36b6'
- global_gpio_adapter_common:
  - quick_selection: 'default'
 * BE CAREFUL MODIFYING THIS COMMENT - IT IS YAML SETTINGS FOR TOOLS **********/
/* clang-format on */

/***********************************************************************************************************************
 * Included files
 **********************************************************************************************************************/
#include "peripherals.h"

/***********************************************************************************************************************
 * BOARD_InitPeripherals functional group
 **********************************************************************************************************************/
/***********************************************************************************************************************
 * INTC initialization code
 **********************************************************************************************************************/
/* clang-format off */
/* TEXT BELOW IS USED AS SETTING FOR TOOLS *************************************
instance:
- name: 'INTC'
- type: 'intc_reg'
- mode: 'general'
- custom_name_enabled: 'false'
- type_id: 'intc_reg_5d361a53fef6bec91d1f7c2aeedd895b'
- functional_group: 'BOARD_InitPeripherals'
- peripheral: 'INTC'
- config_sets:
  - intc:
    - dsc_core_int_level: 'mask_level_0_1_2'
    - interrupt_table:
      - 0: []
    - interrupts: []
 * BE CAREFUL MODIFYING THIS COMMENT - IT IS YAML SETTINGS FOR TOOLS **********/
/* clang-format on */

/* Empty initialization function (commented out)
static void INTC_init(void) {
} */

/***********************************************************************************************************************
 * Flash_configuration initialization code
 **********************************************************************************************************************/
/* clang-format off */
/* TEXT BELOW IS USED AS SETTING FOR TOOLS *************************************
instance:
- name: 'Flash_configuration'
- type: 'dsc_flash_config'
- mode: 'general'
- custom_name_enabled: 'false'
- type_id: 'dsc_flash_config_87b8cda2db02ccd1732cf954ffb02af3'
- functional_group: 'BOARD_InitPeripherals'
- config_sets:
  - fcf_config:
    - bcaConfig:
      - crcCheck:
        - crcStartAddress: '0xFFFFFFFF'
        - crcByteCount: '0xFFFFFFFF'
        - crcExpectedValue: '0xFFFFFFFF'
      - enabledPeripherals: 'uart i2c spi can'
      - i2cSlaveAddress: '0xFF'
      - peripheralDetectionTimeout: '0xFFFF'
      - directBootFlag: 'false'
      - canConfig:
        - baudRateConfig: 'auto'
        - canTxId: '0xFFFF'
        - canRxId: '0xFFFF'
    - flashConfig:
      - keyBytes:
        - 0:
          - byteValue: '0xFF'
        - 1:
          - byteValue: '0xFF'
        - 2:
          - byteValue: '0xFF'
        - 3:
          - byteValue: '0xFF'
        - 4:
          - byteValue: '0xFF'
        - 5:
          - byteValue: '0xFF'
        - 6:
          - byteValue: '0xFF'
        - 7:
          - byteValue: '0xFF'
      - protBytes:
        - 0:
          - byteValue: '0xFF'
        - 1:
          - byteValue: '0xFF'
        - 2:
          - byteValue: '0xFF'
        - 3:
          - byteValue: '0xFF'
      - FSEC:
        - SEC: 'unsecure'
        - FSLACC: 'granted'
        - KEYEN: 'false'
        - MEEN: 'true'
      - bootOption: '3'
      - pwrMode: '1'
    - fcf_codegenerator: []
 * BE CAREFUL MODIFYING THIS COMMENT - IT IS YAML SETTINGS FOR TOOLS **********/
/* clang-format on */

/* Empty initialization function (commented out)
static void Flash_configuration_init(void) {
} */

/***********************************************************************************************************************
 * TIMER initialization code
 **********************************************************************************************************************/
/* clang-format off */
/* TEXT BELOW IS USED AS SETTING FOR TOOLS *************************************
instance:
- name: 'TIMER'
- type: 'qtmr_reg'
- mode: 'general'
- custom_name_enabled: 'true'
- type_id: 'qtmr_reg_19ff29c7d66f72ec59fde9c83852e6f9'
- functional_group: 'BOARD_InitPeripherals'
- peripheral: 'TMRA'
- config_sets:
  - generalConfig:
    - clockSource: 'BusInterfaceClock'
    - clockSourceFreq: 'ClocksTool_DefaultInit'
    - enable_timer_channels:
      - 0:
        - enableTimerChannel: 'true'
      - 1:
        - enableTimerChannel: 'false'
      - 2:
        - enableTimerChannel: 'false'
      - 3:
        - enableTimerChannel: 'false'
    - input_filters:
      - 0:
        - inputFilterPeriod: '0'
        - inputFilterCount: '3'
      - 1:
        - inputFilterPeriod: '0'
        - inputFilterCount: '3'
      - 2:
        - inputFilterPeriod: '0'
        - inputFilterCount: '3'
      - 3:
        - inputFilterPeriod: '0'
        - inputFilterCount: '3'
    - qtmr_channels:
      - 0:
        - channel: '0'
        - channelConfig:
          - primarySource: '9'
          - secondarySource: '0'
          - inputPolarity: 'false'
          - inputFault: 'false'
          - countingMode: '1'
          - enableCountOnce: 'false'
          - countLength: '1'
          - inputAltLoad: 'false'
          - countDirection: '0'
          - triggeredCountInit: '0'
          - enableMasterMode: 'false'
          - enableExternalForce: 'false'
          - enableCoChannelReinit: 'false'
          - outputMode: '0'
          - forceOutputValue: 'false'
          - forcedOutputValue: '0'
          - outputPolarity: 'false'
          - outputEnabled: 'false'
          - captureMode: '0'
          - reloadOnCapture: 'false'
          - compare1Period: '10000'
          - compareLoadControl1: '1'
          - compare2Period: '0'
          - compareLoadControl2: '0'
          - compareLoad1: '10000'
          - compareLoad2: '0'
          - counterLoad: '0'
          - counterInit: '0'
          - debugMode: '0'
          - interruptSources:
            - kQTMR_CompareInterruptEnable: 'false'
            - kQTMR_Compare1InterruptEnable: 'true'
            - kQTMR_Compare2InterruptEnable: 'false'
            - kQTMR_OverflowInterruptEnable: 'false'
            - kQTMR_EdgeInterruptEnable: 'false'
          - enable_irq: 'true'
          - interrupt:
            - IRQn: 'kTMRA_0_VECTORn'
            - dsc_enable_interrrupt: 'iprVal1'
            - enable_custom_name: 'true'
            - handler_custom_name: 'TIMER_IRQ_HANDLER'
          - dma:
            - kQTMR_InputEdgeFlagDmaEnable: 'false'
            - kQTMR_ComparatorPreload1DmaEnable: 'false'
            - kQTMR_ComparatorPreload2DmaEnable: 'false'
        - template_params: []
    - qtmr_params: []
 * BE CAREFUL MODIFYING THIS COMMENT - IT IS YAML SETTINGS FOR TOOLS **********/
/* clang-format on */

static void TIMER_init(void) {
/****************************************************************************/
/* Channel 0 initialization */
/****************************************************************************/
  /* Disable the channel before the module init*/
  TMRA->CHANNEL[0].ENBL &= ~(TMR_ENBL_ENBL(1U << 0));
  TMRA->CHANNEL[0].HOLD = 0x0U;
  TMRA->CHANNEL[0].CAPT = 0x0U;
#ifdef TIMER_COMP10_INIT
  TMRA->CHANNEL[0].COMP1 = TIMER_COMP10_INIT;
#else
  TMRA->CHANNEL[0].COMP1 = 0x0U;
#endif /*TIMER_COMP10_INIT*/
#ifdef TIMER_COMP20_INIT
  TMRA->CHANNEL[0].COMP2 = TIMER_COMP20_INIT;
#else
  TMRA->CHANNEL[0].COMP2 = 0x0U;
#endif /*TIMER_COMP20_INIT */
#ifdef TIMER_LOAD0_INIT
  TMRA->CHANNEL[0].LOAD = TIMER_LOAD0_INIT;
#else
  TMRA->CHANNEL[0].LOAD = 0x0U;
#endif /*TIMER_LOAD0_INIT */
#ifdef TIMER_CNTR0_INIT
  TMRA->CHANNEL[0].CNTR = TIMER_CNTR0_INIT;
#else
  TMRA->CHANNEL[0].CNTR = 0x0U;
#endif /*TIMER_CNTR0_INIT */
#ifdef TIMER_SCTRL0_INIT
  TMRA->CHANNEL[0].SCTRL = TIMER_SCTRL0_INIT;
#else
  TMRA->CHANNEL[0].SCTRL = 0x0U;
#endif /*TIMER_SCTRL0_INIT */
#ifdef TIMER_CMPLD10_INIT
  TMRA->CHANNEL[0].CMPLD1 = TIMER_CMPLD10_INIT;
#else
  TMRA->CHANNEL[0].CMPLD1 = 0x0U;
#endif /*TIMER_CMPLD10_INIT */
#ifdef TIMER_CMPLD20_INIT
  TMRA->CHANNEL[0].CMPLD2 = TIMER_CMPLD20_INIT;
#else
  TMRA->CHANNEL[0].CMPLD2 = 0x0U;
#endif /*TIMER_CMPLD20_INIT */
#ifdef TIMER_CSCTRL0_INIT
  TMRA->CHANNEL[0].CSCTRL = TIMER_CSCTRL0_INIT;
#else
  TMRA->CHANNEL[0].CSCTRL = 0x0U;
#endif /*TIMER_CSCTRL0_INIT */
#ifdef TIMER_DMA0_INIT
  TMRA->CHANNEL[0].DMA = TIMER_DMA0_INIT;
#else
  TMRA->CHANNEL[0].DMA = 0x0U;
#endif /*TIMER_DMA0_INIT */
#ifdef TIMER_CTRL0_INIT
  TMRA->CHANNEL[0].CTRL = TIMER_CTRL0_INIT;
#else
  TMRA->CHANNEL[0].CTRL = 0x0U;
#endif /*TIMER_CTRL0_INIT */
/****************************************************************************/
/* Quad timer global initialization */
/****************************************************************************/
  /* Input filters configuration */
#ifdef TIMER_FILT0_INIT
  TMRA->CHANNEL[0].FILT = TIMER_FILT0_INIT;
#else
  TMRA->CHANNEL[0].FILT = 0x0U;
#endif /*TIMER_FILT0_INIT */
#ifdef TIMER_FILT1_INIT
  TMRA->CHANNEL[1].FILT = TIMER_FILT1_INIT;
#else
  TMRA->CHANNEL[1].FILT = 0x0U;
#endif /*TIMER_FILT1_INIT */
#ifdef TIMER_FILT2_INIT
  TMRA->CHANNEL[2].FILT = TIMER_FILT2_INIT;
#else
  TMRA->CHANNEL[2].FILT = 0x0U;
#endif /*TIMER_FILT2_INIT */
#ifdef TIMER_FILT3_INIT
  TMRA->CHANNEL[3].FILT = TIMER_FILT3_INIT;
#else
  TMRA->CHANNEL[3].FILT = 0x0U;
#endif /*TIMER_FILT3_INIT */
  /* Synchronous start of all channels */
#if defined(TIMER_ENBL_INIT)
   TMRA->CHANNEL[0].ENBL = (TMRA->CHANNEL[0].ENBL & (~TIMER_ENBL_INIT_MASK)) | (TIMER_ENBL_INIT & TIMER_ENBL_INIT_MASK);
#endif /*TIMER_TMRA_ENBL_INIT */
}

/***********************************************************************************************************************
 * I2C1 initialization code
 **********************************************************************************************************************/
/* clang-format off */
/* TEXT BELOW IS USED AS SETTING FOR TOOLS *************************************
instance:
- name: 'I2C1'
- type: 'i2c_reg'
- mode: 'general'
- custom_name_enabled: 'false'
- type_id: 'i2c_reg_dffe0fc17c81d4dae066a1e858fe3caa'
- functional_group: 'BOARD_InitPeripherals'
- peripheral: 'I2C1'
- config_sets:
  - generalConfig:
    - IICEN: 'true'
    - clkConfig:
      - clockSource: 'BusInterfaceClock'
      - clockSourceFreq: 'ClocksTool_DefaultInit'
      - MULT: '2'
      - icr: '18'
    - filterConfig:
      - clockSource: 'GlitchFilterClock'
      - clockSourceFreq: 'ClocksTool_DefaultInit'
      - FLT: '150 ns'
    - control:
      - SHEN: '0'
      - HDRS: '0'
      - TX: '1'
      - TXAK: '0'
      - FACK: 'false'
      - DMAEN: 'false'
      - TCKSEL: '0'
      - SSLT: '0'
    - enableSlave: 'true'
    - slaveCfg:
      - ADEXT: '0'
      - AD: '0'
      - GCAEN: 'false'
      - ALERTEN: 'false'
      - SIICAEN: 'false'
      - SAD: '0x61'
      - RMEN: 'false'
      - RA: '0'
    - IICIE: 'false'
    - interruptSources:
      - SSIE: 'false'
      - SHTF2IE: 'false'
      - WUEN: 'false'
    - enable_irq: 'false'
    - interrupt:
      - IRQn: 'kI2C1_VECTORn'
      - dsc_enable_interrrupt: 'iprVal0'
      - enable_custom_name: 'false'
    - i2c_params: []
 * BE CAREFUL MODIFYING THIS COMMENT - IT IS YAML SETTINGS FOR TOOLS **********/
/* clang-format on */

static void I2C1_init(void) {
/****************************************************************************/
/* I2C1 initialization */
/****************************************************************************/
  /* Software peripheral reset to a known state. */
  SIM->PSWR1 |= SIM_PSWR1_IIC1_MASK;
  SIM->PSWR1 &= ~ SIM_PSWR1_IIC1_MASK;
#if defined(I2C1_A1_INIT)
  I2C1->A1 = I2C1_A1_INIT;
#endif /* I2C1_A1_INIT */
#if defined(I2C1_F_INIT)
  I2C1->F = I2C1_F_INIT;
#endif /* I2C1_F_INIT */
#if defined(I2C1_C2_INIT)
  I2C1->C2 = I2C1_C2_INIT;
#endif /* I2C1_C2_INIT */
#if defined(I2C1_FLT_INIT)
  I2C1->FLT = I2C1_FLT_INIT;
#endif /* I2C1_FLT_INIT */
#if defined(I2C1_RA_INIT)
  I2C1->RA = I2C1_RA_INIT;
#endif /* I2C1_RA_INIT */
#if defined(I2C1_SMB_INIT)
  I2C1->SMB = I2C1_SMB_INIT;
#endif /* I2C1_SMB_INIT */
#if defined(I2C1_A2_INIT)
  I2C1->A2 = I2C1_A2_INIT;
#endif /* I2C1_A2_INIT */
#if defined(I2C1_SLTH_INIT)
  I2C1->SLTH = I2C1_SLTH_INIT;
#endif /* I2C1_SLTH_INIT */
#if defined(I2C1_SLTL_INIT)
  I2C1->SLTL = I2C1_SLTL_INIT;
#endif /* I2C1_SLTL_INIT */
#if defined(I2C1_C1_INIT)
  I2C1->C1 = I2C1_C1_INIT;
#endif /* I2C1_C1_INIT */
}

/***********************************************************************************************************************
 * Initialization functions
 **********************************************************************************************************************/
static void BOARD_InitPeripherals_CommonPreInit(void)
{
  /* Disable all interrupts to prevent invoking of any interrupt during initialization of peripherals. */
  INTC->CTRL |= INTC_CTRL_INT_DIS_MASK;
  /* Enable clock gate of the TMRA peripheral. */
  SIM->PCE0 |= SIM_PCE0_TA0_MASK;
  /* Enable clock gate of the I2C1 peripheral. */
  SIM->PCE1 |= SIM_PCE1_IIC1_MASK;
}

static void BOARD_InitPeripherals_CommonPostInit(void)
{
  /* Set the interrupt priority: Priority 0 of the kTMRA_0_VECTORn request in the INTC. */
  INTC->IPR2 = (INTC->IPR2 & ~INTC_IPR2_TMRA_0_MASK) | INTC_IPR2_TMRA_0(1);
  /* Enable all interrupts after initialization of peripherals. */
  INTC->CTRL &= ~INTC_CTRL_INT_DIS_MASK;
  /* Initialization of masked/enabled DSC core interrupt levels. */
  __EI(3);
}

void BOARD_InitPeripherals(void)
{
  /* Common pre-initialization */
  BOARD_InitPeripherals_CommonPreInit();
  /* Initialize components */
  TIMER_init();
  I2C1_init();
  /* Common post-initialization */
  BOARD_InitPeripherals_CommonPostInit();
}

/***********************************************************************************************************************
 * BOARD_InitBootPeripherals function
 **********************************************************************************************************************/
void BOARD_InitBootPeripherals(void)
{
  BOARD_InitPeripherals();
}
